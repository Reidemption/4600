(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{1589:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chores",function(){return r(3792)}])},2804:function(e,n,r){"use strict";r.d(n,{K:function(){return i}});var o=r(4480);let i=(0,o.cn)({key:"userState",default:null})},3792:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return X}});var o=r(5893),i=r(7754),t=r(8911),s=r(295),c=r(6684),a=r(9222),l=r(3100),d=r(7294),h=r(204),u=r(4049),x=r(5034),j=r(4641),p=r(1669),g=r(6877),m=r(7335),C=r(9154),D=r(2752),f=r(1963),y=r(1948),k=r(4504),v=r(5819),w=r(3793),b=r(8267),N=r(5370),S=r(8129),L=r(8691),z=r(1753),I=r(7018),_=r(8193);let q=()=>(0,o.jsx)(g.J,{as:_.$iz,boxSize:4}),E=e=>{let{handleEditChore:n,handleDeleteChore:r,loading:i,props:t}=e,{isOpen:s,onOpen:l,onClose:j}=(0,m.q)(),[p,g]=(0,d.useState)({Name:t.Name,Date:t.Date,repeated:t.repeated,Location:t.Location,Frequency:t.Frequency,Description:t.Description,isDone:!1,shared:!1}),_=()=>{g({Name:t.Name,Date:t.Date,repeated:t.repeated,Location:t.Location,Frequency:t.Frequency,Description:t.Description,isDone:t.isDone,shared:t.shared}),j()},E=e=>{g({...p,[e.target.name]:e.target.value})},R=e=>{e.preventDefault(),n(p)},F=e=>{console.log(e.target.checked),g({...p,repeated:e.target.checked})},K=e=>{console.log(e.target.checked),g({...p,shared:e.target.checked})};return(0,o.jsxs)(h.k,{children:[(0,o.jsx)(C.h,{"aria-label":"Edit chore",size:"xs",icon:(0,o.jsx)(q,{}),onClick:l}),(0,o.jsxs)(D.u_,{onClose:j,isOpen:s,children:[(0,o.jsx)(f.Z,{}),(0,o.jsx)("form",{onSubmit:R,children:(0,o.jsxs)(y.h,{maxW:"40rem",children:[(0,o.jsx)(k.x,{children:"Edit Chore"}),(0,o.jsx)(v.o,{}),(0,o.jsx)(w.f,{children:(0,o.jsxs)(c.K,{direction:"column",spacing:2,children:[(0,o.jsxs)(b.NI,{isRequired:!0,children:[(0,o.jsx)(N.l,{mb:0,children:"Chore Name"}),(0,o.jsx)(S.I,{id:"Name",name:"Name",onChange:E,value:p.Name})]}),(0,o.jsxs)(c.K,{direction:"row",alignItems:"center",children:[(0,o.jsxs)(b.NI,{isRequired:!0,children:[(0,o.jsx)(N.l,{mb:0,children:"Chore Date"}),(0,o.jsx)(S.I,{value:p.Date,id:"Date",name:"Date",onChange:E,type:"date"})]}),(0,o.jsx)(u.X,{pt:4,id:"repeated",name:"repeated",onChange:F,isChecked:p.repeated,children:"Repeated?"})]}),p.repeated&&(0,o.jsx)(b.NI,{isRequired:!0,children:(0,o.jsxs)(L.P,{onChange:E,children:[(0,o.jsx)("option",{value:"day",children:"Daily"}),(0,o.jsx)("option",{value:"week",children:"Weekly"}),(0,o.jsx)("option",{value:"2week",children:"Bi-Weekly"}),(0,o.jsx)("option",{value:"month",children:"Monthly"}),(0,o.jsx)("option",{value:"quarter",children:"Quarterly"}),(0,o.jsx)("option",{value:"year",children:"Yearly"})]})}),(0,o.jsxs)(b.NI,{children:[(0,o.jsx)(N.l,{mb:0,children:"Chore Location"}),(0,o.jsx)(S.I,{id:"Location",name:"Location",onChange:E,value:p.Location})]}),(0,o.jsxs)(b.NI,{children:[(0,o.jsx)(N.l,{mb:0,children:"Chore Description"}),(0,o.jsx)(z.g,{value:p.Description,id:"Description",name:"Description",onChange:E})]}),(0,o.jsx)(u.X,{pt:1,id:"shared",name:"shared",onChange:K,isChecked:p.shared,children:"Share Upon Completion?"})]})}),(0,o.jsxs)(I.m,{children:[(0,o.jsx)(a.z,{colorScheme:"purple",type:"submit",isLoading:i,onClick:()=>{n(p,t.id),j()},children:"Update Chore"}),(0,o.jsx)(a.z,{ml:3,variant:"outline",colorScheme:"red",type:"submit",isLoading:i,onClick:()=>{r(t.id),j()},children:"Delete Chore"}),(0,o.jsx)(x.L,{}),(0,o.jsx)(a.z,{onClick:_,children:"Close"})]})]})})]})]})},R=e=>{let{finishChore:n,deleteChore:r,editChore:i,props:s,checked:a}=e,d=()=>{let e=new Date,n=e.getDate(),r=e.getMonth()+1,o=e.getFullYear();return"".concat(o,"-").concat(r,"-").concat(n)};return(0,o.jsx)(h.k,{align:"center",justify:"center",border:"2px",borderColor:"blackAlpha.400",w:"55vh",bg:"white",children:(0,o.jsxs)(h.k,{w:"100%",m:5,children:[(0,o.jsx)(u.X,{w:"10%",isChecked:a,onChange:()=>n(s.isDone,s.id)}),(0,o.jsx)(x.L,{}),(0,o.jsx)(j.U,{spacing:3,w:"35%",children:(0,o.jsxs)(p.g,{spacing:0,align:"start",children:[(0,o.jsx)(t.x,{mt:0,children:s.Name}),(0,o.jsx)(t.x,{color:(()=>{console.log(s.Date,d);let e=d();return new Date(s.Date)<new Date(e)?"red":""})(),children:s.Date}),(0,o.jsx)(t.x,{textAlign:"center",as:"i",children:s.Frequency})]})}),(0,o.jsx)(x.L,{}),(0,o.jsx)(l.xu,{width:"50%",children:(0,o.jsxs)(c.K,{direction:"column",children:[(0,o.jsx)(t.x,{fontSize:"sm",children:s.Description}),(0,o.jsx)(t.x,{fontSize:"xs",fontWeight:"bold",children:s.Location})]})}),(0,o.jsx)(E,{props:s,handleEditChore:i,handleDeleteChore:r})]})})};var F=r(3247),K=r(1618),O=r(6383),U=r(4480),J=r(2804),Z=r(1664),M=r.n(Z);let P=()=>{let[e,n]=(0,U.FV)(J.K),[r,h]=(0,d.useState)([]),[u,x]=(0,d.useState)(!1),[j,p]=(0,d.useState)(!1),g=async(e,n)=>{if(n){let r=(0,F.JU)(K.RZ,"chores",n);await (0,F.r7)(r,{...e}),y()}},m=async e=>{if(e){let n=(0,F.JU)(K.RZ,"chores",e);await (0,F.oe)(n),y()}},C=async(e,n)=>{if(e.shared,e.repeated,!e.repeated){let r=(0,F.JU)(K.RZ,"chores",n);await (0,F.r7)(r,{isDone:!(null==e?void 0:e.status)}),console.log("chore finished")}y()},D=async()=>{try{let n=(0,F.IO)((0,F.hJ)(K.RZ,"chores"),(0,F.ar)("creatorId","==",null==e?void 0:e.uid)),r=await (0,F.PL)(n);console.log("choreDocs",r);let o=r.docs.map(e=>({...e.data(),id:e.id}));console.log("choreData",o),h(o)}catch(e){console.error("getChores error:",e)}},f=async()=>{let e=(0,O.v0)();(0,O.Aj)(e,async e=>{try{let{uid:r,displayName:o,email:i}=e;n({uid:r,displayName:o,email:i});let t=(0,F.IO)((0,F.hJ)(K.RZ,"chores"),(0,F.ar)("creatorId","==",null==e?void 0:e.uid)),s=await (0,F.PL)(t);console.log("choreDocs",s);let c=s.docs.map(e=>({...e.data(),id:e.id}));h(c.sort((e,n)=>new Date(n.Date).valueOf()-new Date(e.Date).valueOf()))}catch(e){console.error("getChores error:",e)}x(!1)})},y=async()=>{x(!0),console.log("currentUser",e),(null==e?void 0:e.uid)?(console.log("user"),await D()):(console.log("no user"),await f()),x(!1)},k=()=>{p(!j)},v=r.filter(e=>!e.isDone||j),w=r.filter(e=>e.isDone).length;return((0,d.useEffect)(()=>{(async function(){await y()})()},[]),null==e?void 0:e.uid)?u?(0,o.jsx)(i.M,{h:"100vh",children:(0,o.jsx)(s.$,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})}):0===w?(0,o.jsx)(i.M,{h:"100vh",children:(0,o.jsxs)(c.K,{children:[(0,o.jsx)(t.x,{fontSize:"xl",children:"You are all caught up on your chores!"}),(0,o.jsx)(a.z,{onClick:k,colorScheme:"purple",children:"Show Completed Chores"})]})}):(0,o.jsx)(l.xu,{children:(0,o.jsxs)(c.K,{direction:"column",spacing:"6",align:"center",mt:"3",children:[r&&v.map(e=>(0,o.jsx)(R,{props:e,checked:e.isDone,finishChore:C,editChore:g,deleteChore:m},e.id)),(0,o.jsx)(a.z,{onClick:k,colorScheme:"purple",children:"Toggle Completed Chores"})]})}):(0,o.jsxs)(i.M,{h:"100vh",children:[(0,o.jsx)(t.x,{fontSize:"xl",color:"blue.400",children:(0,o.jsx)(M(),{href:"register",children:"Create an account\xa0"})}),(0,o.jsx)(t.x,{fontSize:"xl",children:" to keep track of chores!"}),"bnv"]})};var X=P}},function(e){e.O(0,[617,31,774,888,179],function(){return e(e.s=1589)}),_N_E=e.O()}]);